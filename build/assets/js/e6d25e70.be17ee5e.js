"use strict";(globalThis.webpackChunkwikitruth_docs=globalThis.webpackChunkwikitruth_docs||[]).push([[355],{2724(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>f,frontMatter:()=>d,metadata:()=>i,toc:()=>o});var c=t(4848),a=t(8453);const d={title:"Truth Box",description:"On-chain data structure and encrypted storage method of Truth Box.",sidebar:{order:8}},r=void 0,i={id:"truth-box",title:"Truth Box",description:"On-chain data structure and encrypted storage method of Truth Box.",source:"@site/docs/truth-box.md",sourceDirName:".",slug:"/truth-box",permalink:"/docs/truth-box",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Truth Box",description:"On-chain data structure and encrypted storage method of Truth Box.",sidebar:{order:8}},sidebar:"docs",previous:{title:"Security and Trust",permalink:"/docs/security"},next:{title:"Status Mechanism",permalink:"/docs/status-mechanism"}},s={},o=[{value:"On-chain Data Structure",id:"on-chain-data-structure",level:3},{value:"metadata-Box",id:"metadata-box",level:3},{value:"create",id:"create",level:4},{value:"createAndPublish",id:"createandpublish",level:4}];function l(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Truth Box is a unique, non-transferable carrier of truth access rights. It is the core asset of the entire project, implementing the access control entry for core confidential data, and managing state transitions and lifecycle."}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"on-chain-data-structure",children:"On-chain Data Structure"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-solidity",children:"struct PublicData {\n  Status _status;\n  uint256 _price;\n  uint256 _deadline;\n}\n\nstruct SecretData {\n  address _minter;\n  bytes _encryptedData; // Encrypted payload (private key / evidence key)\n  bytes32 _nonce;       // Encrypted nonce, requires decryption\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"PublicData"}),": Public status, pricing, and deadline, used for transaction matching and expiration determination."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"SecretData"}),": Confidential fields encrypted by Sapphire TEE, containing the creator's address, encrypted confidential data ciphertext, and nonce; can only be unsealed by authorized SIWE + contract verification."]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"metadata-box",children:"metadata-Box"}),"\n",(0,c.jsxs)(n.p,{children:["There are two types of metadata files for TruthBox, corresponding to the two ways of creating a TruthBox: ",(0,c.jsx)(n.code,{children:"create"})," and ",(0,c.jsx)(n.code,{children:"createAndPublish"}),". The following shows their main differences."]}),"\n",(0,c.jsx)(n.h4,{id:"create",children:"create"}),"\n",(0,c.jsx)(n.p,{children:"Contains symmetrically encrypted data."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "mint_method": "create",\n  "encryption_slices_metadata_cid": {\n    "encryption_data": "0xabae872298fe488793f17df3e79c5dd4e8f8e9f9da0cf1edee035314887c7192deb7ada30b04915e0602a75c001991ecc570966430f9cf6fa06d3d8fb53caa1e02d7417447f91957336525",\n    "encryption_iv": "0x76ed0699369e1b84988d424b"\n  },\n  "encryption_file_cid": [\n    {\n      "encryption_data": "0x71f4e8844358d32996f98a27c807fffdd706dec902764f6ba00221ca5e3e16c80c42a86a65c6f975ad1ce6d566cdccda5335d7379985956c39fb1bffb51e0dc9510f2c48cf7a1985cf7487",\n      "encryption_iv": "0x11bcacd05f25f5fb5dc88191"\n    },\n    {\n      "encryption_data": "0xd3d0d4d7f519cc846dfd2faeaf0cc3de1be26fdd7e0b7405778d6c42d9da140f6f281e318a45331fc5f65ea4b2dccc61bbc36ddc02a34a1fea31eb05b59ae5ba762c3136f58ace71c57245",\n      "encryption_iv": "0x827b3181516cb4283ac44a76"\n    }\n  ],\n  "encryption_password": {\n    "encryption_data": "0xbad15d202fc944949086f1d490d169f2b17b49f71fd0ca63020348b8060e8166c6a485c0c3c87d59d8810b6e8480a73cf1900287722afc053296d4522e9dc51ed8f72b7ab6f3f9ae65440aef7b6f3518",\n    "encryption_iv": "0x3dd46d0c6a9df5c8e7bf9b3f"\n  },\n  "public_key": "0x3059301306072a8648ce3d020106082a8648ce3d03010703420004cdb130ae2d72132ec0369c11873353f22ddb09e4f0d52c221c9d673090596bc38fab6d842690d0ce6aedf7fddc740fd1572c2511e86728b1332b6eb8732ad9ca",\n  "file_cid_list": []\n}\n'})}),"\n",(0,c.jsx)(n.h4,{id:"createandpublish",children:"createAndPublish"}),"\n",(0,c.jsx)(n.p,{children:"Directly public Truth Box, so no encryption is needed, and it does not contain symmetrically encrypted data, but directly stores the CID of the files."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "mint_method": "createAndPublish",\n  // "encryption_slices_metadata_cid": {\n  //   "encryption_data": "",\n  //   "encryption_iv": ""\n  // },\n  // "encryption_file_cid": [],\n  // "encryption_password": {\n  //   "encryption_data": "",\n  //   "encryption_iv": ""\n  // },\n  // "public_key": "",\n  "file_cid_list": [\n    "bafkreibnsg36tgfxsoyq3jb6dfwwb3ffunn3mrrd6twlj6p5mhstfym3xy"\n  ]\n}\n'})})]})}function f(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>i});var c=t(6540);const a={},d=c.createContext(a);function r(e){const n=c.useContext(d);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),c.createElement(d.Provider,{value:n},e.children)}}}]);